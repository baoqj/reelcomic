import React, { createContext, useCallback, useContext, useEffect, useMemo, useState } from 'react';
import { Series } from './types';

export type Language = 'en' | 'fr' | 'es' | 'zh';

export interface LanguageOption {
  code: Language;
  label: string;
  nativeLabel: string;
  shortLabel: string;
}

const LANGUAGE_STORAGE_KEY = 'reelcomic.language';

export const LANGUAGE_OPTIONS: LanguageOption[] = [
  { code: 'en', label: 'English', nativeLabel: 'English', shortLabel: 'EN' },
  { code: 'fr', label: 'French', nativeLabel: 'Francais', shortLabel: 'FR' },
  { code: 'es', label: 'Spanish', nativeLabel: 'Espanol', shortLabel: 'ES' },
  { code: 'zh', label: 'Chinese', nativeLabel: '中文', shortLabel: '中文' },
];

const SUPPORTED_LANGUAGE_SET = new Set<Language>(LANGUAGE_OPTIONS.map((item) => item.code));

type TranslationDict = Record<string, string>;

type InterpolationValues = Record<string, string | number>;

const EN_TRANSLATIONS: TranslationDict = {
  // shared
  'language.switch': 'Language',
  'common.loading': 'Loading...',
  'common.viewAll': 'View All',
  'common.details': 'Details',

  // header + nav
  'header.home': 'Home',
  'header.categories': 'Categories',
  'header.playlist': 'Playlist',
  'header.vip': 'VIP',
  'header.admin': 'Admin',
  'header.searchPlaceholder': 'Search...',
  'header.signIn': 'Sign In',
  'header.logout': 'Logout',
  'header.profile': 'Profile',
  'header.login': 'Login',

  // home
  'home.featuredShort': 'Featured Short',
  'home.watchNow': 'Watch Now',
  'home.details': 'Details',
  'home.newReleases': 'New Releases',
  'home.newEpisodeBadge': 'New EP',
  'home.trendingNow': 'Trending Now',
  'home.trendingBadge': '#1 Trending',
  'home.popularGenres': 'Popular Genres',
  'home.footerDescription': 'Short anime episodes, premium streaming, and creator-friendly publishing in one place.',
  'home.footerPrivacy': 'Privacy',
  'home.footerTerms': 'Terms',
  'home.footerContact': 'Contact',

  // explore
  'explore.breadcrumbCategories': 'Categories',
  'explore.title': 'Anime Short Dramas',
  'explore.subtitle': 'Explore episodes between 60 and 120 seconds.',
  'explore.sortNewest': 'Sort: Newest',
  'explore.loadingCatalog': 'Loading latest catalog...',
  'explore.loadMoreTitles': 'Load More Titles',

  // details
  'details.hotSeries': 'Hot Series',
  'details.views': 'Views',
  'details.playNow': 'Play Now',
  'details.addToList': 'Add to List',
  'details.aboutDrama': 'About the Drama',
  'details.genres': 'Genres',
  'details.status': 'Status',
  'details.cast': 'Cast',
  'details.castUnavailable': 'Cast info unavailable',
  'details.synopsis': 'Synopsis',
  'details.episodes': 'Episodes',
  'details.episodeNumber': 'Episode {number}',
  'details.noEpisodes': 'No episodes available yet.',

  // player
  'player.episodeNumber': 'Episode {number}',
  'player.share': 'Share',
  'player.tabEpisodes': 'Episodes',
  'player.tabComments': 'Comments ({count})',
  'player.totalEpisodes': '{count} Episodes',
  'player.unlocksAvailable': 'Unlocks available',
  'player.chapterTitle': 'Chapter Title {number}',
  'player.unlockAllEpisodes': 'Unlock All Episodes',

  // profile
  'profile.loginRequiredTitle': 'Please sign in first',
  'profile.loginRequiredBody': 'Sign in to sync your watch history, VIP benefits, and progress across devices.',
  'profile.goToAuth': 'Go to Login / Register',
  'profile.userId': 'User ID: {id}',
  'profile.vipUntil': 'VIP Member until {date}',
  'profile.editProfile': 'Edit Profile',
  'profile.followers': 'Followers',
  'profile.following': 'Following',
  'profile.minutesWatched': 'Minutes Watched',
  'profile.globalRank': 'Global Rank',
  'profile.tabOverview': 'Overview',
  'profile.tabHistory': 'History',
  'profile.tabMyList': 'My List',
  'profile.continueWatching': 'Continue Watching',
  'profile.progressEpisodeOf': 'Ep {episode} of {total}',
  'profile.watchedAgo': 'Watched 2h ago',
  'profile.discoverMore': 'Discover More',
  'profile.accountSecurity': 'Account Security',
  'profile.emailAddress': 'Email Address',
  'profile.password': 'Password',
  'profile.passwordChanged': 'Last changed 3 months ago',
  'profile.myBalance': 'My Balance',
  'profile.coins': 'Coins',
  'profile.rechargeNow': 'Recharge Now',
  'profile.vipBenefits': 'VIP Benefits',
  'profile.manageSubscription': 'Manage Subscription',

  // auth
  'auth.oauthErrorGoogleState': 'Google sign-in expired, please try again.',
  'auth.oauthErrorGoogleCallback': 'Google sign-in failed, please try again later.',
  'auth.oauthErrorAppleState': 'Apple sign-in expired, please try again.',
  'auth.oauthErrorAppleCallback': 'Apple sign-in failed, please try again later.',
  'auth.oauthErrorDefault': 'OAuth sign-in failed.',
  'auth.emptyEmailPassword': 'Please enter email and password.',
  'auth.displayNameMin': 'Display name must be at least 2 characters.',
  'auth.passwordMismatch': 'Passwords do not match.',
  'auth.authFailed': 'Authentication failed.',
  'auth.networkError': 'Network error, please try again later.',
  'auth.heroLabel': 'ReelComic Access',
  'auth.heroTitle': 'Sign in to continue your short-anime universe',
  'auth.heroDescription': 'Email sign-up plus Google / Apple one-tap login, with synced progress and VIP benefits.',
  'auth.heroPointLibrary': 'Massive anime short catalog',
  'auth.heroPointVip': 'VIP-only episodes',
  'auth.loginTitle': 'Sign in to ReelComic',
  'auth.registerTitle': 'Create a ReelComic account',
  'auth.tabLogin': 'Login',
  'auth.tabRegister': 'Register',
  'auth.displayNameLabel': 'Display Name',
  'auth.displayNamePlaceholder': 'Example: NekoWatcher',
  'auth.emailLabel': 'Email',
  'auth.passwordLabel': 'Password',
  'auth.passwordPlaceholder': 'At least 8 characters',
  'auth.confirmPasswordLabel': 'Confirm Password',
  'auth.confirmPasswordPlaceholder': 'Enter password again',
  'auth.submitting': 'Processing...',
  'auth.submitLogin': 'Login',
  'auth.submitRegister': 'Create Account',
  'auth.orOAuth': 'Or use OAuth',
  'auth.googleLogin': 'Sign in with Google',
  'auth.appleLogin': 'Sign in with Apple',

  // shop
  'shop.errorCreateCheckout': 'Failed to create checkout session.',
  'shop.errorInvalidCheckoutUrl': 'Stripe returned an invalid checkout URL.',
  'shop.errorPayRequest': 'Payment request failed, please try again later.',
  'shop.errorOpenBilling': 'Unable to open billing management.',
  'shop.errorInvalidPortalUrl': 'Stripe returned an invalid portal URL.',
  'shop.errorPortalRequest': 'Billing portal request failed, please try again later.',
  'shop.heroTitle': 'Unlock the Ultimate Experience',
  'shop.heroSubtitle': 'Access exclusive dramas, watch in 4K Ultra HD, and support your favorite creators with VIP status.',
  'shop.billingMonthly': 'Monthly Billing',
  'shop.billingYearly': 'Yearly',
  'shop.savePercent': 'Save 20%',
  'shop.standard': 'Standard',
  'shop.freePlan': 'Free Plan',
  'shop.perMonth': '/month',
  'shop.perYear': '/year',
  'shop.currentPlan': 'Current Plan',
  'shop.freeFeatureHd': '720p HD Resolution',
  'shop.freeFeatureLibrary': 'Access to Public Library',
  'shop.freeFeatureAds': 'Contains Advertisements',
  'shop.mostPopular': 'Most Popular',
  'shop.vipPremium': 'VIP Premium',
  'shop.eliteVipMember': 'Elite VIP Member',
  'shop.redirectingStripe': 'Redirecting to Stripe...',
  'shop.subscribeStripe': 'Subscribe with Stripe',
  'shop.coinShop': 'Anime Coin Shop',
  'shop.topUpCoins': 'Top-up Coins',
  'shop.coinsSubtitle': 'Use coins to unlock premium episodes or gift them to creators.',
  'shop.packStarter': 'Starter',
  'shop.packAdventurer': 'Adventurer',
  'shop.packValue': 'Value Pack',
  'shop.packWhale': 'Pro Whale',
  'shop.packBonus10': '+10% Bonus',
  'shop.packBonus25': '+25% Bonus',
  'shop.packBonus40': '+40% Bonus',
  'shop.manageStripeOpening': 'Opening...',
  'shop.manageStripe': 'Manage Existing Stripe Subscription',
  'shop.faqTitle': 'Frequently Asked Questions',
  'shop.faq1': 'Can I cancel my VIP subscription anytime?',
  'shop.faq2': "Do coins expire if I don't use them?",
  'shop.faq3': "What's the difference between VIP and Coins?",

  // subscription perks
  'perk.adFree': 'Ad-free',
  'perk.resolution': '1080p / 4K',
  'perk.earlyAccessEpisodes': 'Early access episodes',
  'perk.prioritySupport': 'Priority support',
  'perk.everythingInMonthly': 'Everything in monthly',
  'perk.twoMonthsFree': '2 months free',
  'perk.exclusiveBadge': 'Exclusive badge',
  'perk.limitedEvents': 'Limited events',
  'perk.adFreeExperience': 'Ad-free experience',
  'perk.ultraHd': '4K Ultra HD quality',
  'perk.earlyAccess': 'Early access to episodes',
  'perk.exclusiveVipBadges': 'Exclusive VIP badges',

  // playlist
  'playlist.title': 'My Playlist',
  'playlist.savedSeries': '{count} Series saved',
  'playlist.emptyTitle': 'Your playlist is empty',
  'playlist.emptyDescription': 'Save shows you want to watch later by clicking the "Add to List" button on any series.',

  // admin layout
  'admin.portal': 'Admin Portal',
  'admin.mainMenu': 'Main Menu',
  'admin.menuDashboard': 'Dashboard',
  'admin.menuContentManagement': 'Content Management',
  'admin.menuUserManagement': 'User Management',
  'admin.menuSubscriptions': 'Subscriptions',
  'admin.analytics': 'Analytics',
  'admin.menuPerformance': 'Performance',
  'admin.mobileDashboardTitle': 'Dashboard',
  'admin.searchContent': 'Search content...',
  'admin.mobileHome': 'Home',
  'admin.mobileDramas': 'Dramas',
  'admin.mobileStats': 'Stats',
  'admin.mobileSettings': 'Settings',

  // admin dashboard
  'admin.dashboard.today': 'Today',
  'admin.dashboard.days7': '7 Days',
  'admin.dashboard.days30': '30 Days',
  'admin.dashboard.overviewTitle': 'Dashboard Overview',
  'admin.dashboard.overviewSubtitle': "Welcome back, here's what's happening today.",
  'admin.dashboard.revenue': 'Revenue',
  'admin.dashboard.newUsers': 'New Users',
  'admin.dashboard.activeViewers': 'Active Viewers',
  'admin.dashboard.watchTime': 'Watch Time (Hrs)',
  'admin.dashboard.revenueTrend': 'Revenue Trend',
  'admin.dashboard.avgRevenuePerHour': 'Avg. $450 per hour',
  'admin.dashboard.topDramas': 'Top Dramas',
  'admin.dashboard.fullAnalytics': 'Full Analytics Report',
  'admin.dashboard.growthInsights': 'Growth Insights',
  'admin.dashboard.monthlyGoal': "You've reached 85% of your monthly subscriber goal.",
  'admin.dashboard.currentGoal': 'Current: 8,500',
  'admin.dashboard.goalTarget': 'Goal: 10,000',
  'admin.dashboard.viewsCr': '{views} views • {cr}% CR',

  // admin content
  'admin.content.title': 'Drama Management',
  'admin.content.subtitle': 'Manage short-series metadata, episodes, posters, and stream status.',
  'admin.content.uploadNew': 'Upload New Drama',
  'admin.content.category': 'Category',
  'admin.content.status': 'Status',
  'admin.content.sortBy': 'Sort By',
  'admin.content.allGenres': 'All Genres',
  'admin.content.shonen': 'Shonen',
  'admin.content.shojo': 'Shojo',
  'admin.content.allStatus': 'All Status',
  'admin.content.latestUpdated': 'Latest Updated',
  'admin.content.totalViews': 'Total Views',
  'admin.content.filters': 'Filters',
  'admin.content.moreFilters': 'More Filters',
  'admin.content.cover': 'Cover',
  'admin.content.dramaInfo': 'Drama Info',
  'admin.content.episodes': 'Episodes',
  'admin.content.lastUpdate': 'Last Update',
  'admin.content.actions': 'Actions',
  'admin.content.showingResults': 'Showing {start}-{end} of {total} dramas',
  'admin.content.hot': 'HOT',
  'admin.content.edit': 'Edit',
  'admin.content.delete': 'Delete',

  // common domain translations
  'status.ongoing': 'Ongoing',
  'status.completed': 'Completed',
  'genre.all': 'All Genres',
  'genre.action': 'Action',
  'genre.fantasy': 'Fantasy',
  'genre.romance': 'Romance',
  'genre.comedy': 'Comedy',
  'genre.scifi': 'Sci-Fi',
  'genre.suspense': 'Suspense',
  'genre.school': 'School',
  'genre.thriller': 'Thriller',
  'genre.shonen': 'Shonen',
  'genre.shojo': 'Shojo',
  'genre.unknown': 'Other',
};

const FR_TRANSLATIONS: TranslationDict = {
  ...EN_TRANSLATIONS,
  'language.switch': 'Langue',
  'header.home': 'Accueil',
  'header.categories': 'Categories',
  'header.playlist': 'Liste',
  'header.admin': 'Admin',
  'header.searchPlaceholder': 'Rechercher...',
  'header.signIn': 'Connexion',
  'header.logout': 'Deconnexion',
  'header.profile': 'Profil',
  'header.login': 'Connexion',

  'home.featuredShort': 'Episode en vedette',
  'home.watchNow': 'Regarder',
  'home.newReleases': 'Nouveautes',
  'home.newEpisodeBadge': 'Nouvel EP',
  'home.trendingNow': 'Tendance',
  'home.trendingBadge': 'Top #1',
  'home.popularGenres': 'Genres populaires',
  'home.footerDescription': 'Episodes anime courts, streaming premium et publication pour createurs sur une seule plateforme.',
  'home.footerPrivacy': 'Confidentialite',
  'home.footerTerms': 'Conditions',
  'home.footerContact': 'Contact',

  'explore.breadcrumbCategories': 'Categories',
  'explore.title': 'Courts dramas anime',
  'explore.subtitle': 'Explorez des episodes de 60 a 120 secondes.',
  'explore.sortNewest': 'Tri: plus recents',
  'explore.loadingCatalog': 'Chargement du catalogue...',
  'explore.loadMoreTitles': 'Charger plus',

  'details.hotSeries': 'Serie populaire',
  'details.views': 'Vues',
  'details.playNow': 'Lire maintenant',
  'details.addToList': 'Ajouter a la liste',
  'details.aboutDrama': 'A propos',
  'details.genres': 'Genres',
  'details.status': 'Statut',
  'details.cast': 'Distribution',
  'details.castUnavailable': 'Distribution indisponible',
  'details.synopsis': 'Synopsis',
  'details.episodes': 'Episodes',
  'details.episodeNumber': 'Episode {number}',
  'details.noEpisodes': 'Aucun episode pour le moment.',

  'player.episodeNumber': 'Episode {number}',
  'player.share': 'Partager',
  'player.tabEpisodes': 'Episodes',
  'player.tabComments': 'Commentaires ({count})',
  'player.totalEpisodes': '{count} episodes',
  'player.unlocksAvailable': 'Deblocages disponibles',
  'player.chapterTitle': 'Chapitre {number}',
  'player.unlockAllEpisodes': 'Debloquer tous les episodes',

  'profile.loginRequiredTitle': 'Connectez-vous d\'abord',
  'profile.loginRequiredBody': 'Connectez-vous pour synchroniser l\'historique, les avantages VIP et la progression multi-appareils.',
  'profile.goToAuth': 'Aller a Connexion / Inscription',
  'profile.userId': 'ID utilisateur: {id}',
  'profile.vipUntil': 'VIP jusqu\'au {date}',
  'profile.editProfile': 'Modifier le profil',
  'profile.followers': 'Abonnes',
  'profile.following': 'Abonnements',
  'profile.minutesWatched': 'Minutes vues',
  'profile.globalRank': 'Classement global',
  'profile.tabOverview': 'Apercu',
  'profile.tabHistory': 'Historique',
  'profile.tabMyList': 'Ma liste',
  'profile.continueWatching': 'Reprendre la lecture',
  'profile.progressEpisodeOf': 'Ep {episode} sur {total}',
  'profile.watchedAgo': 'Vu il y a 2h',
  'profile.discoverMore': 'Decouvrir plus',
  'profile.accountSecurity': 'Securite du compte',
  'profile.emailAddress': 'Adresse e-mail',
  'profile.password': 'Mot de passe',
  'profile.passwordChanged': 'Modifie il y a 3 mois',
  'profile.myBalance': 'Mon solde',
  'profile.coins': 'Pieces',
  'profile.rechargeNow': 'Recharger',
  'profile.vipBenefits': 'Avantages VIP',
  'profile.manageSubscription': 'Gerer l\'abonnement',

  'auth.oauthErrorGoogleState': 'La connexion Google a expire, veuillez reessayer.',
  'auth.oauthErrorGoogleCallback': 'Echec de la connexion Google, veuillez reessayer plus tard.',
  'auth.oauthErrorAppleState': 'La connexion Apple a expire, veuillez reessayer.',
  'auth.oauthErrorAppleCallback': 'Echec de la connexion Apple, veuillez reessayer plus tard.',
  'auth.oauthErrorDefault': 'Echec de la connexion OAuth.',
  'auth.emptyEmailPassword': 'Veuillez saisir e-mail et mot de passe.',
  'auth.displayNameMin': 'Le pseudo doit contenir au moins 2 caracteres.',
  'auth.passwordMismatch': 'Les mots de passe ne correspondent pas.',
  'auth.authFailed': 'Authentification echouee.',
  'auth.networkError': 'Erreur reseau, veuillez reessayer plus tard.',
  'auth.heroLabel': 'Acces ReelComic',
  'auth.heroTitle': 'Connectez-vous pour continuer votre univers anime',
  'auth.heroDescription': 'Inscription e-mail et connexion Google / Apple en un clic, avec progression synchronisee.',
  'auth.heroPointLibrary': 'Grand catalogue d\'anime courts',
  'auth.heroPointVip': 'Episodes exclusifs VIP',
  'auth.loginTitle': 'Connexion ReelComic',
  'auth.registerTitle': 'Creer un compte ReelComic',
  'auth.tabLogin': 'Connexion',
  'auth.tabRegister': 'Inscription',
  'auth.displayNameLabel': 'Pseudo',
  'auth.displayNamePlaceholder': 'Exemple: NekoWatcher',
  'auth.emailLabel': 'E-mail',
  'auth.passwordLabel': 'Mot de passe',
  'auth.passwordPlaceholder': 'Au moins 8 caracteres',
  'auth.confirmPasswordLabel': 'Confirmer le mot de passe',
  'auth.confirmPasswordPlaceholder': 'Saisissez a nouveau le mot de passe',
  'auth.submitting': 'Traitement...',
  'auth.submitLogin': 'Connexion',
  'auth.submitRegister': 'Creer un compte',
  'auth.orOAuth': 'Ou utiliser OAuth',
  'auth.googleLogin': 'Connexion Google',
  'auth.appleLogin': 'Connexion Apple',

  'shop.errorCreateCheckout': 'Echec de creation de la session de paiement.',
  'shop.errorInvalidCheckoutUrl': 'Stripe a renvoye une URL de paiement invalide.',
  'shop.errorPayRequest': 'Echec de paiement, veuillez reessayer plus tard.',
  'shop.errorOpenBilling': 'Impossible d\'ouvrir la gestion de facturation.',
  'shop.errorInvalidPortalUrl': 'Stripe a renvoye une URL de portail invalide.',
  'shop.errorPortalRequest': 'Echec du portail de facturation, veuillez reessayer plus tard.',
  'shop.heroTitle': 'Debloquez l\'experience ultime',
  'shop.heroSubtitle': 'Accedez a des dramas exclusifs, regardez en 4K Ultra HD et soutenez vos createurs preferes.',
  'shop.billingMonthly': 'Facturation mensuelle',
  'shop.billingYearly': 'Annuel',
  'shop.savePercent': 'Economisez 20%',
  'shop.standard': 'Standard',
  'shop.freePlan': 'Plan gratuit',
  'shop.perMonth': '/mois',
  'shop.perYear': '/an',
  'shop.currentPlan': 'Plan actuel',
  'shop.freeFeatureHd': 'Resolution 720p HD',
  'shop.freeFeatureLibrary': 'Acces a la bibliotheque publique',
  'shop.freeFeatureAds': 'Contient des publicites',
  'shop.mostPopular': 'Le plus populaire',
  'shop.vipPremium': 'VIP Premium',
  'shop.eliteVipMember': 'Membre VIP Elite',
  'shop.redirectingStripe': 'Redirection vers Stripe...',
  'shop.subscribeStripe': 'S\'abonner via Stripe',
  'shop.coinShop': 'Boutique de pieces anime',
  'shop.topUpCoins': 'Recharger des pieces',
  'shop.coinsSubtitle': 'Utilisez les pieces pour debloquer des episodes premium ou en offrir aux createurs.',
  'shop.packStarter': 'Debutant',
  'shop.packAdventurer': 'Aventurier',
  'shop.packValue': 'Pack valeur',
  'shop.packWhale': 'Pro Whale',
  'shop.packBonus10': '+10% bonus',
  'shop.packBonus25': '+25% bonus',
  'shop.packBonus40': '+40% bonus',
  'shop.manageStripeOpening': 'Ouverture...',
  'shop.manageStripe': 'Gerer un abonnement Stripe existant',
  'shop.faqTitle': 'Questions frequentes',
  'shop.faq1': 'Puis-je annuler mon abonnement VIP a tout moment?',
  'shop.faq2': 'Les pieces expirent-elles si je ne les utilise pas?',
  'shop.faq3': 'Quelle est la difference entre VIP et pieces?',

  'perk.adFree': 'Sans publicite',
  'perk.resolution': '1080p / 4K',
  'perk.earlyAccessEpisodes': 'Acces anticipe aux episodes',
  'perk.prioritySupport': 'Support prioritaire',
  'perk.everythingInMonthly': 'Tout le contenu du mensuel',
  'perk.twoMonthsFree': '2 mois offerts',
  'perk.exclusiveBadge': 'Badge exclusif',
  'perk.limitedEvents': 'Evenements limites',
  'perk.adFreeExperience': 'Experience sans publicite',
  'perk.ultraHd': 'Qualite 4K Ultra HD',
  'perk.earlyAccess': 'Acces anticipe aux episodes',
  'perk.exclusiveVipBadges': 'Badges VIP exclusifs',

  'playlist.title': 'Ma liste',
  'playlist.savedSeries': '{count} series enregistrees',
  'playlist.emptyTitle': 'Votre liste est vide',
  'playlist.emptyDescription': 'Enregistrez les series a regarder plus tard via le bouton "Ajouter a la liste".',

  'admin.portal': 'Portail Admin',
  'admin.mainMenu': 'Menu principal',
  'admin.menuDashboard': 'Tableau de bord',
  'admin.menuContentManagement': 'Gestion du contenu',
  'admin.menuUserManagement': 'Gestion des utilisateurs',
  'admin.menuSubscriptions': 'Abonnements',
  'admin.analytics': 'Analytique',
  'admin.menuPerformance': 'Performance',
  'admin.mobileDashboardTitle': 'Tableau',
  'admin.searchContent': 'Rechercher du contenu...',
  'admin.mobileHome': 'Accueil',
  'admin.mobileDramas': 'Dramas',
  'admin.mobileStats': 'Stats',
  'admin.mobileSettings': 'Reglages',

  'admin.dashboard.today': 'Aujourd\'hui',
  'admin.dashboard.days7': '7 jours',
  'admin.dashboard.days30': '30 jours',
  'admin.dashboard.overviewTitle': 'Vue d\'ensemble',
  'admin.dashboard.overviewSubtitle': "Bon retour, voici l\'activite d\'aujourd\'hui.",
  'admin.dashboard.revenue': 'Revenus',
  'admin.dashboard.newUsers': 'Nouveaux utilisateurs',
  'admin.dashboard.activeViewers': 'Spectateurs actifs',
  'admin.dashboard.watchTime': 'Temps de visionnage (h)',
  'admin.dashboard.revenueTrend': 'Tendance des revenus',
  'admin.dashboard.avgRevenuePerHour': 'Moy. 450 $ / heure',
  'admin.dashboard.topDramas': 'Top dramas',
  'admin.dashboard.fullAnalytics': 'Rapport analytique complet',
  'admin.dashboard.growthInsights': 'Insights de croissance',
  'admin.dashboard.monthlyGoal': 'Vous avez atteint 85% de votre objectif mensuel d\'abonnes.',
  'admin.dashboard.currentGoal': 'Actuel: 8 500',
  'admin.dashboard.goalTarget': 'Objectif: 10 000',
  'admin.dashboard.viewsCr': '{views} vues • {cr}% CR',

  'admin.content.title': 'Gestion des dramas',
  'admin.content.subtitle': 'Gerez les metadonnees, episodes, affiches et statut de streaming.',
  'admin.content.uploadNew': 'Uploader un drama',
  'admin.content.category': 'Categorie',
  'admin.content.status': 'Statut',
  'admin.content.sortBy': 'Trier par',
  'admin.content.allGenres': 'Tous les genres',
  'admin.content.shonen': 'Shonen',
  'admin.content.shojo': 'Shojo',
  'admin.content.allStatus': 'Tous les statuts',
  'admin.content.latestUpdated': 'Derniere mise a jour',
  'admin.content.totalViews': 'Vues totales',
  'admin.content.filters': 'Filtres',
  'admin.content.moreFilters': 'Plus de filtres',
  'admin.content.cover': 'Couverture',
  'admin.content.dramaInfo': 'Infos drama',
  'admin.content.episodes': 'Episodes',
  'admin.content.lastUpdate': 'Derniere MAJ',
  'admin.content.actions': 'Actions',
  'admin.content.showingResults': 'Affichage {start}-{end} sur {total} dramas',
  'admin.content.hot': 'HOT',
  'admin.content.edit': 'Modifier',
  'admin.content.delete': 'Supprimer',

  'status.ongoing': 'En cours',
  'status.completed': 'Termine',
  'genre.all': 'Tous les genres',
  'genre.action': 'Action',
  'genre.fantasy': 'Fantaisie',
  'genre.romance': 'Romance',
  'genre.comedy': 'Comedie',
  'genre.scifi': 'Sci-Fi',
  'genre.suspense': 'Suspense',
  'genre.school': 'Scolaire',
  'genre.thriller': 'Thriller',
  'genre.shonen': 'Shonen',
  'genre.shojo': 'Shojo',
  'genre.unknown': 'Autre',
};

const ES_TRANSLATIONS: TranslationDict = {
  ...EN_TRANSLATIONS,
  'language.switch': 'Idioma',
  'header.home': 'Inicio',
  'header.categories': 'Categorias',
  'header.playlist': 'Lista',
  'header.admin': 'Admin',
  'header.searchPlaceholder': 'Buscar...',
  'header.signIn': 'Iniciar sesion',
  'header.logout': 'Cerrar sesion',
  'header.profile': 'Perfil',
  'header.login': 'Entrar',

  'home.featuredShort': 'Corto destacado',
  'home.watchNow': 'Ver ahora',
  'home.newReleases': 'Nuevos lanzamientos',
  'home.newEpisodeBadge': 'Nuevo EP',
  'home.trendingNow': 'Tendencias',
  'home.trendingBadge': '#1 Tendencia',
  'home.popularGenres': 'Generos populares',
  'home.footerDescription': 'Episodios cortos de anime, streaming premium y publicacion para creadores en una sola plataforma.',
  'home.footerPrivacy': 'Privacidad',
  'home.footerTerms': 'Terminos',
  'home.footerContact': 'Contacto',

  'explore.breadcrumbCategories': 'Categorias',
  'explore.title': 'Dramas anime cortos',
  'explore.subtitle': 'Explora episodios entre 60 y 120 segundos.',
  'explore.sortNewest': 'Ordenar: mas recientes',
  'explore.loadingCatalog': 'Cargando catalogo...',
  'explore.loadMoreTitles': 'Cargar mas titulos',

  'details.hotSeries': 'Serie popular',
  'details.views': 'Vistas',
  'details.playNow': 'Reproducir',
  'details.addToList': 'Agregar a la lista',
  'details.aboutDrama': 'Sobre la serie',
  'details.genres': 'Generos',
  'details.status': 'Estado',
  'details.cast': 'Reparto',
  'details.castUnavailable': 'Reparto no disponible',
  'details.synopsis': 'Sinopsis',
  'details.episodes': 'Episodios',
  'details.episodeNumber': 'Episodio {number}',
  'details.noEpisodes': 'Aun no hay episodios disponibles.',

  'player.episodeNumber': 'Episodio {number}',
  'player.share': 'Compartir',
  'player.tabEpisodes': 'Episodios',
  'player.tabComments': 'Comentarios ({count})',
  'player.totalEpisodes': '{count} episodios',
  'player.unlocksAvailable': 'Desbloqueos disponibles',
  'player.chapterTitle': 'Capitulo {number}',
  'player.unlockAllEpisodes': 'Desbloquear todos los episodios',

  'profile.loginRequiredTitle': 'Inicia sesion primero',
  'profile.loginRequiredBody': 'Inicia sesion para sincronizar historial, beneficios VIP y progreso entre dispositivos.',
  'profile.goToAuth': 'Ir a Inicio / Registro',
  'profile.userId': 'ID de usuario: {id}',
  'profile.vipUntil': 'VIP hasta {date}',
  'profile.editProfile': 'Editar perfil',
  'profile.followers': 'Seguidores',
  'profile.following': 'Siguiendo',
  'profile.minutesWatched': 'Minutos vistos',
  'profile.globalRank': 'Rango global',
  'profile.tabOverview': 'Resumen',
  'profile.tabHistory': 'Historial',
  'profile.tabMyList': 'Mi lista',
  'profile.continueWatching': 'Seguir viendo',
  'profile.progressEpisodeOf': 'Ep {episode} de {total}',
  'profile.watchedAgo': 'Visto hace 2 h',
  'profile.discoverMore': 'Descubrir mas',
  'profile.accountSecurity': 'Seguridad de la cuenta',
  'profile.emailAddress': 'Correo electronico',
  'profile.password': 'Contrasena',
  'profile.passwordChanged': 'Ultimo cambio hace 3 meses',
  'profile.myBalance': 'Mi saldo',
  'profile.coins': 'Monedas',
  'profile.rechargeNow': 'Recargar ahora',
  'profile.vipBenefits': 'Beneficios VIP',
  'profile.manageSubscription': 'Gestionar suscripcion',

  'auth.oauthErrorGoogleState': 'La sesion de Google expiro, vuelve a intentarlo.',
  'auth.oauthErrorGoogleCallback': 'Error en inicio de sesion con Google, intenta mas tarde.',
  'auth.oauthErrorAppleState': 'La sesion de Apple expiro, vuelve a intentarlo.',
  'auth.oauthErrorAppleCallback': 'Error en inicio de sesion con Apple, intenta mas tarde.',
  'auth.oauthErrorDefault': 'Fallo el inicio de sesion OAuth.',
  'auth.emptyEmailPassword': 'Completa correo y contrasena.',
  'auth.displayNameMin': 'El nombre debe tener al menos 2 caracteres.',
  'auth.passwordMismatch': 'Las contrasenas no coinciden.',
  'auth.authFailed': 'Autenticacion fallida.',
  'auth.networkError': 'Error de red, intenta de nuevo mas tarde.',
  'auth.heroLabel': 'Acceso ReelComic',
  'auth.heroTitle': 'Inicia sesion para continuar tu universo de anime corto',
  'auth.heroDescription': 'Registro por correo y acceso con Google / Apple en un toque, con progreso sincronizado.',
  'auth.heroPointLibrary': 'Gran catalogo de animes cortos',
  'auth.heroPointVip': 'Episodios exclusivos VIP',
  'auth.loginTitle': 'Inicia sesion en ReelComic',
  'auth.registerTitle': 'Crear cuenta ReelComic',
  'auth.tabLogin': 'Entrar',
  'auth.tabRegister': 'Registrarse',
  'auth.displayNameLabel': 'Nombre',
  'auth.displayNamePlaceholder': 'Ejemplo: NekoWatcher',
  'auth.emailLabel': 'Correo',
  'auth.passwordLabel': 'Contrasena',
  'auth.passwordPlaceholder': 'Minimo 8 caracteres',
  'auth.confirmPasswordLabel': 'Confirmar contrasena',
  'auth.confirmPasswordPlaceholder': 'Escribe la contrasena de nuevo',
  'auth.submitting': 'Procesando...',
  'auth.submitLogin': 'Entrar',
  'auth.submitRegister': 'Crear cuenta',
  'auth.orOAuth': 'O usar OAuth',
  'auth.googleLogin': 'Entrar con Google',
  'auth.appleLogin': 'Entrar con Apple',

  'shop.errorCreateCheckout': 'No se pudo crear la sesion de pago.',
  'shop.errorInvalidCheckoutUrl': 'Stripe devolvio una URL de pago invalida.',
  'shop.errorPayRequest': 'Fallo la solicitud de pago, intenta mas tarde.',
  'shop.errorOpenBilling': 'No se puede abrir la gestion de facturacion.',
  'shop.errorInvalidPortalUrl': 'Stripe devolvio una URL de portal invalida.',
  'shop.errorPortalRequest': 'Fallo la solicitud del portal, intenta mas tarde.',
  'shop.heroTitle': 'Desbloquea la experiencia definitiva',
  'shop.heroSubtitle': 'Accede a dramas exclusivos, mira en 4K Ultra HD y apoya a tus creadores favoritos.',
  'shop.billingMonthly': 'Facturacion mensual',
  'shop.billingYearly': 'Anual',
  'shop.savePercent': 'Ahorra 20%',
  'shop.standard': 'Estandar',
  'shop.freePlan': 'Plan gratis',
  'shop.perMonth': '/mes',
  'shop.perYear': '/ano',
  'shop.currentPlan': 'Plan actual',
  'shop.freeFeatureHd': 'Resolucion HD 720p',
  'shop.freeFeatureLibrary': 'Acceso a biblioteca publica',
  'shop.freeFeatureAds': 'Contiene anuncios',
  'shop.mostPopular': 'Mas popular',
  'shop.vipPremium': 'VIP Premium',
  'shop.eliteVipMember': 'Miembro VIP Elite',
  'shop.redirectingStripe': 'Redirigiendo a Stripe...',
  'shop.subscribeStripe': 'Suscribirse con Stripe',
  'shop.coinShop': 'Tienda de monedas anime',
  'shop.topUpCoins': 'Recargar monedas',
  'shop.coinsSubtitle': 'Usa monedas para desbloquear episodios premium o regalarlas a creadores.',
  'shop.packStarter': 'Inicial',
  'shop.packAdventurer': 'Aventurero',
  'shop.packValue': 'Paquete ahorro',
  'shop.packWhale': 'Pro Whale',
  'shop.packBonus10': '+10% bono',
  'shop.packBonus25': '+25% bono',
  'shop.packBonus40': '+40% bono',
  'shop.manageStripeOpening': 'Abriendo...',
  'shop.manageStripe': 'Gestionar suscripcion existente de Stripe',
  'shop.faqTitle': 'Preguntas frecuentes',
  'shop.faq1': 'Puedo cancelar mi suscripcion VIP en cualquier momento?',
  'shop.faq2': 'Las monedas vencen si no las uso?',
  'shop.faq3': 'Cual es la diferencia entre VIP y Monedas?',

  'perk.adFree': 'Sin anuncios',
  'perk.resolution': '1080p / 4K',
  'perk.earlyAccessEpisodes': 'Acceso anticipado a episodios',
  'perk.prioritySupport': 'Soporte prioritario',
  'perk.everythingInMonthly': 'Todo lo del plan mensual',
  'perk.twoMonthsFree': '2 meses gratis',
  'perk.exclusiveBadge': 'Insignia exclusiva',
  'perk.limitedEvents': 'Eventos limitados',
  'perk.adFreeExperience': 'Experiencia sin anuncios',
  'perk.ultraHd': 'Calidad 4K Ultra HD',
  'perk.earlyAccess': 'Acceso anticipado a episodios',
  'perk.exclusiveVipBadges': 'Insignias VIP exclusivas',

  'playlist.title': 'Mi lista',
  'playlist.savedSeries': '{count} series guardadas',
  'playlist.emptyTitle': 'Tu lista esta vacia',
  'playlist.emptyDescription': 'Guarda series para ver luego con el boton "Agregar a la lista".',

  'admin.portal': 'Portal Admin',
  'admin.mainMenu': 'Menu principal',
  'admin.menuDashboard': 'Panel',
  'admin.menuContentManagement': 'Gestion de contenido',
  'admin.menuUserManagement': 'Gestion de usuarios',
  'admin.menuSubscriptions': 'Suscripciones',
  'admin.analytics': 'Analitica',
  'admin.menuPerformance': 'Rendimiento',
  'admin.mobileDashboardTitle': 'Panel',
  'admin.searchContent': 'Buscar contenido...',
  'admin.mobileHome': 'Inicio',
  'admin.mobileDramas': 'Dramas',
  'admin.mobileStats': 'Stats',
  'admin.mobileSettings': 'Ajustes',

  'admin.dashboard.today': 'Hoy',
  'admin.dashboard.days7': '7 dias',
  'admin.dashboard.days30': '30 dias',
  'admin.dashboard.overviewTitle': 'Resumen del panel',
  'admin.dashboard.overviewSubtitle': 'Bienvenido de nuevo, esto esta pasando hoy.',
  'admin.dashboard.revenue': 'Ingresos',
  'admin.dashboard.newUsers': 'Nuevos usuarios',
  'admin.dashboard.activeViewers': 'Espectadores activos',
  'admin.dashboard.watchTime': 'Tiempo de visionado (h)',
  'admin.dashboard.revenueTrend': 'Tendencia de ingresos',
  'admin.dashboard.avgRevenuePerHour': 'Prom. $450 por hora',
  'admin.dashboard.topDramas': 'Top dramas',
  'admin.dashboard.fullAnalytics': 'Informe analitico completo',
  'admin.dashboard.growthInsights': 'Insights de crecimiento',
  'admin.dashboard.monthlyGoal': 'Has alcanzado el 85% de tu meta mensual de suscriptores.',
  'admin.dashboard.currentGoal': 'Actual: 8,500',
  'admin.dashboard.goalTarget': 'Meta: 10,000',
  'admin.dashboard.viewsCr': '{views} vistas • {cr}% CR',

  'admin.content.title': 'Gestion de dramas',
  'admin.content.subtitle': 'Gestiona metadatos, episodios, posters y estado de streaming.',
  'admin.content.uploadNew': 'Subir nuevo drama',
  'admin.content.category': 'Categoria',
  'admin.content.status': 'Estado',
  'admin.content.sortBy': 'Ordenar por',
  'admin.content.allGenres': 'Todos los generos',
  'admin.content.shonen': 'Shonen',
  'admin.content.shojo': 'Shojo',
  'admin.content.allStatus': 'Todos los estados',
  'admin.content.latestUpdated': 'Ultima actualizacion',
  'admin.content.totalViews': 'Vistas totales',
  'admin.content.filters': 'Filtros',
  'admin.content.moreFilters': 'Mas filtros',
  'admin.content.cover': 'Portada',
  'admin.content.dramaInfo': 'Info del drama',
  'admin.content.episodes': 'Episodios',
  'admin.content.lastUpdate': 'Ultima actualizacion',
  'admin.content.actions': 'Acciones',
  'admin.content.showingResults': 'Mostrando {start}-{end} de {total} dramas',
  'admin.content.hot': 'HOT',
  'admin.content.edit': 'Editar',
  'admin.content.delete': 'Eliminar',

  'status.ongoing': 'En emision',
  'status.completed': 'Completado',
  'genre.all': 'Todos los generos',
  'genre.action': 'Accion',
  'genre.fantasy': 'Fantasia',
  'genre.romance': 'Romance',
  'genre.comedy': 'Comedia',
  'genre.scifi': 'Sci-Fi',
  'genre.suspense': 'Suspenso',
  'genre.school': 'Escolar',
  'genre.thriller': 'Thriller',
  'genre.shonen': 'Shonen',
  'genre.shojo': 'Shojo',
  'genre.unknown': 'Otro',
};

const ZH_TRANSLATIONS: TranslationDict = {
  ...EN_TRANSLATIONS,
  'language.switch': '语种',
  'header.home': '首页',
  'header.categories': '分类',
  'header.playlist': '片单',
  'header.vip': '会员',
  'header.admin': '管理',
  'header.searchPlaceholder': '搜索...',
  'header.signIn': '登录',
  'header.logout': '退出',
  'header.profile': '个人中心',
  'header.login': '登录',

  'home.featuredShort': '精选短剧',
  'home.watchNow': '立即观看',
  'home.details': '详情',
  'home.newReleases': '新上架',
  'home.newEpisodeBadge': '新更',
  'home.trendingNow': '热播排行',
  'home.trendingBadge': '热度 #1',
  'home.popularGenres': '热门分类',
  'home.footerDescription': '在一个平台里享受动漫短剧、会员流媒体和创作者友好的发布能力。',
  'home.footerPrivacy': '隐私政策',
  'home.footerTerms': '服务条款',
  'home.footerContact': '联系我们',

  'explore.breadcrumbCategories': '分类',
  'explore.title': '动漫短剧',
  'explore.subtitle': '探索 60 到 120 秒的高密度短剧分集。',
  'explore.sortNewest': '排序：最新',
  'explore.loadingCatalog': '正在加载最新剧库...',
  'explore.loadMoreTitles': '加载更多',

  'details.hotSeries': '热门剧集',
  'details.views': '播放',
  'details.playNow': '开始播放',
  'details.addToList': '加入片单',
  'details.aboutDrama': '剧目信息',
  'details.genres': '类型',
  'details.status': '状态',
  'details.cast': '配音/演员',
  'details.castUnavailable': '暂无演职员信息',
  'details.synopsis': '剧情简介',
  'details.episodes': '分集列表',
  'details.episodeNumber': '第 {number} 集',
  'details.noEpisodes': '暂无分集内容。',

  'player.episodeNumber': '第 {number} 集',
  'player.share': '分享',
  'player.tabEpisodes': '分集',
  'player.tabComments': '评论 ({count})',
  'player.totalEpisodes': '{count} 集',
  'player.unlocksAvailable': '可解锁',
  'player.chapterTitle': '章节标题 {number}',
  'player.unlockAllEpisodes': '解锁全部分集',

  'profile.loginRequiredTitle': '请先登录账户',
  'profile.loginRequiredBody': '登录后可同步观看历史、VIP权益和设备进度。',
  'profile.goToAuth': '前往登录 / 注册',
  'profile.userId': '用户 ID：{id}',
  'profile.vipUntil': 'VIP 有效期至 {date}',
  'profile.editProfile': '编辑资料',
  'profile.followers': '粉丝',
  'profile.following': '关注',
  'profile.minutesWatched': '观看时长',
  'profile.globalRank': '全球排名',
  'profile.tabOverview': '概览',
  'profile.tabHistory': '历史记录',
  'profile.tabMyList': '我的片单',
  'profile.continueWatching': '继续观看',
  'profile.progressEpisodeOf': '第 {episode} 集 / 共 {total} 集',
  'profile.watchedAgo': '2 小时前观看',
  'profile.discoverMore': '发现更多',
  'profile.accountSecurity': '账号安全',
  'profile.emailAddress': '邮箱地址',
  'profile.password': '密码',
  'profile.passwordChanged': '上次修改：3 个月前',
  'profile.myBalance': '我的余额',
  'profile.coins': '金币',
  'profile.rechargeNow': '立即充值',
  'profile.vipBenefits': 'VIP 权益',
  'profile.manageSubscription': '管理订阅',

  'auth.oauthErrorGoogleState': 'Google 登录状态失效，请重试。',
  'auth.oauthErrorGoogleCallback': 'Google 登录失败，请稍后再试。',
  'auth.oauthErrorAppleState': 'Apple 登录状态失效，请重试。',
  'auth.oauthErrorAppleCallback': 'Apple 登录失败，请稍后再试。',
  'auth.oauthErrorDefault': 'OAuth 登录失败。',
  'auth.emptyEmailPassword': '请填写邮箱和密码',
  'auth.displayNameMin': '昵称至少 2 个字符',
  'auth.passwordMismatch': '两次密码输入不一致',
  'auth.authFailed': '认证失败',
  'auth.networkError': '网络异常，请稍后再试。',
  'auth.heroLabel': 'ReelComic Access',
  'auth.heroTitle': '登录后继续追更你的短剧宇宙',
  'auth.heroDescription': '支持邮箱注册与 Google / Apple 一键登录，跨设备同步观看进度和会员权益。',
  'auth.heroPointLibrary': '海量日漫短剧',
  'auth.heroPointVip': 'VIP 专享分集',
  'auth.loginTitle': '登录 ReelComic',
  'auth.registerTitle': '创建 ReelComic 账号',
  'auth.tabLogin': '登录',
  'auth.tabRegister': '注册',
  'auth.displayNameLabel': '昵称',
  'auth.displayNamePlaceholder': '例如：NekoWatcher',
  'auth.emailLabel': '邮箱',
  'auth.passwordLabel': '密码',
  'auth.passwordPlaceholder': '至少 8 位',
  'auth.confirmPasswordLabel': '确认密码',
  'auth.confirmPasswordPlaceholder': '再次输入密码',
  'auth.submitting': '处理中...',
  'auth.submitLogin': '登录',
  'auth.submitRegister': '创建账号',
  'auth.orOAuth': '或使用 OAuth',
  'auth.googleLogin': 'Google 登录',
  'auth.appleLogin': 'Apple 登录',

  'shop.errorCreateCheckout': '创建支付会话失败',
  'shop.errorInvalidCheckoutUrl': 'Stripe 返回无效链接',
  'shop.errorPayRequest': '支付请求失败，请稍后再试',
  'shop.errorOpenBilling': '无法打开账单管理',
  'shop.errorInvalidPortalUrl': 'Stripe Portal 返回无效链接',
  'shop.errorPortalRequest': '账单管理请求失败，请稍后再试',
  'shop.heroTitle': '解锁终极观看体验',
  'shop.heroSubtitle': '访问独家剧集、享受 4K 超清画质，并以 VIP 身份支持你喜爱的创作者。',
  'shop.billingMonthly': '月付',
  'shop.billingYearly': '年付',
  'shop.savePercent': '省 20%',
  'shop.standard': '标准用户',
  'shop.freePlan': '免费方案',
  'shop.perMonth': '/月',
  'shop.perYear': '/年',
  'shop.currentPlan': '当前方案',
  'shop.freeFeatureHd': '720p 高清',
  'shop.freeFeatureLibrary': '可观看公开剧库',
  'shop.freeFeatureAds': '含广告',
  'shop.mostPopular': '最受欢迎',
  'shop.vipPremium': 'VIP 高级会员',
  'shop.eliteVipMember': '精英 VIP',
  'shop.redirectingStripe': '正在跳转到 Stripe...',
  'shop.subscribeStripe': '使用 Stripe 订阅',
  'shop.coinShop': '动漫金币商店',
  'shop.topUpCoins': '金币充值',
  'shop.coinsSubtitle': '金币可用于解锁付费分集，也可打赏给创作者。',
  'shop.packStarter': '新手包',
  'shop.packAdventurer': '冒险包',
  'shop.packValue': '超值包',
  'shop.packWhale': '尊享大额包',
  'shop.packBonus10': '+10% 赠送',
  'shop.packBonus25': '+25% 赠送',
  'shop.packBonus40': '+40% 赠送',
  'shop.manageStripeOpening': '正在打开...',
  'shop.manageStripe': '管理现有 Stripe 订阅',
  'shop.faqTitle': '常见问题',
  'shop.faq1': 'VIP 订阅可以随时取消吗？',
  'shop.faq2': '金币不使用会过期吗？',
  'shop.faq3': 'VIP 与金币有什么区别？',

  'perk.adFree': '免广告',
  'perk.resolution': '1080p / 4K',
  'perk.earlyAccessEpisodes': '分集抢先看',
  'perk.prioritySupport': '优先客服支持',
  'perk.everythingInMonthly': '包含月付全部权益',
  'perk.twoMonthsFree': '额外赠送 2 个月',
  'perk.exclusiveBadge': '专属徽章',
  'perk.limitedEvents': '限定活动权益',
  'perk.adFreeExperience': '免广告体验',
  'perk.ultraHd': '4K 超清画质',
  'perk.earlyAccess': '分集抢先观看',
  'perk.exclusiveVipBadges': 'VIP 专属身份徽章',

  'playlist.title': '我的片单',
  'playlist.savedSeries': '已收藏 {count} 部剧集',
  'playlist.emptyTitle': '你的片单为空',
  'playlist.emptyDescription': '在剧集详情页点击“加入片单”，即可稍后继续观看。',

  'admin.portal': '管理后台',
  'admin.mainMenu': '主菜单',
  'admin.menuDashboard': '控制面板',
  'admin.menuContentManagement': '内容管理',
  'admin.menuUserManagement': '用户管理',
  'admin.menuSubscriptions': '订阅管理',
  'admin.analytics': '数据分析',
  'admin.menuPerformance': '平台表现',
  'admin.mobileDashboardTitle': '控制面板',
  'admin.searchContent': '搜索内容...',
  'admin.mobileHome': '首页',
  'admin.mobileDramas': '剧集',
  'admin.mobileStats': '统计',
  'admin.mobileSettings': '设置',

  'admin.dashboard.today': '今天',
  'admin.dashboard.days7': '7 天',
  'admin.dashboard.days30': '30 天',
  'admin.dashboard.overviewTitle': '控制面板概览',
  'admin.dashboard.overviewSubtitle': '欢迎回来，以下是今天的平台动态。',
  'admin.dashboard.revenue': '收入',
  'admin.dashboard.newUsers': '新增用户',
  'admin.dashboard.activeViewers': '活跃观众',
  'admin.dashboard.watchTime': '观看时长（小时）',
  'admin.dashboard.revenueTrend': '收入趋势',
  'admin.dashboard.avgRevenuePerHour': '平均每小时 $450',
  'admin.dashboard.topDramas': '热门剧目',
  'admin.dashboard.fullAnalytics': '完整数据报表',
  'admin.dashboard.growthInsights': '增长洞察',
  'admin.dashboard.monthlyGoal': '你已完成本月订阅目标的 85%。',
  'admin.dashboard.currentGoal': '当前：8,500',
  'admin.dashboard.goalTarget': '目标：10,000',
  'admin.dashboard.viewsCr': '{views} 播放 • 转化率 {cr}%',

  'admin.content.title': '剧集管理',
  'admin.content.subtitle': '管理短剧元数据、分集、海报与流媒体状态。',
  'admin.content.uploadNew': '上传新剧集',
  'admin.content.category': '分类',
  'admin.content.status': '状态',
  'admin.content.sortBy': '排序',
  'admin.content.allGenres': '全部分类',
  'admin.content.shonen': '少年向',
  'admin.content.shojo': '少女向',
  'admin.content.allStatus': '全部状态',
  'admin.content.latestUpdated': '最近更新',
  'admin.content.totalViews': '总播放量',
  'admin.content.filters': '筛选',
  'admin.content.moreFilters': '更多筛选',
  'admin.content.cover': '封面',
  'admin.content.dramaInfo': '剧目信息',
  'admin.content.episodes': '分集',
  'admin.content.lastUpdate': '最后更新',
  'admin.content.actions': '操作',
  'admin.content.showingResults': '显示 {start}-{end} / 共 {total} 部剧集',
  'admin.content.hot': '热播',
  'admin.content.edit': '编辑',
  'admin.content.delete': '删除',

  'status.ongoing': '连载中',
  'status.completed': '已完结',
  'genre.all': '全部类型',
  'genre.action': '动作',
  'genre.fantasy': '奇幻',
  'genre.romance': '恋爱',
  'genre.comedy': '喜剧',
  'genre.scifi': '科幻',
  'genre.suspense': '悬疑',
  'genre.school': '校园',
  'genre.thriller': '惊悚',
  'genre.shonen': '少年向',
  'genre.shojo': '少女向',
  'genre.unknown': '其他',
};

const TRANSLATIONS: Record<Language, TranslationDict> = {
  en: EN_TRANSLATIONS,
  fr: FR_TRANSLATIONS,
  es: ES_TRANSLATIONS,
  zh: ZH_TRANSLATIONS,
};

const GENRE_KEY_MAP: Record<string, string> = {
  'All Genres': 'genre.all',
  Action: 'genre.action',
  Fantasy: 'genre.fantasy',
  Romance: 'genre.romance',
  Comedy: 'genre.comedy',
  'Sci-Fi': 'genre.scifi',
  Suspense: 'genre.suspense',
  School: 'genre.school',
  Thriller: 'genre.thriller',
  Shonen: 'genre.shonen',
  Shojo: 'genre.shojo',
};

const STATUS_KEY_MAP: Record<string, string> = {
  ongoing: 'status.ongoing',
  completed: 'status.completed',
};

type LocalizedText = Record<Language, string>;

const DRAMA_TEXT: Record<
  string,
  {
    title: LocalizedText;
    synopsis: LocalizedText;
    episodePrefix: LocalizedText;
    firstEpisode?: LocalizedText;
  }
> = {
  'gw-river': {
    title: {
      en: 'High Martial Path: You Cleared a Sewer and Pierced the Demon God?',
      fr: 'Voie martiale supreme: tu as traverse les egouts et transperce le dieu demon?',
      es: 'Camino marcial supremo: limpiaste la alcantarilla y atravesaste al dios demonio?',
      zh: '高武：让你通下水道，你把魔神捅穿了？',
    },
    synopsis: {
      en: 'A delivery rider awakens a high-martial bloodline and is forced to hunt aberrations in an underground urban maze. 90-second episodes with fast plot twists.',
      fr: 'Un livreur eveille une lignee martiale et doit chasser des monstres dans un labyrinthe souterrain. Episodes de 90 secondes, rythme tres rapide.',
      es: 'Un repartidor despierta un linaje marcial y debe cazar aberraciones en un laberinto subterraneo. Episodios de 90 segundos con giros rapidos.',
      zh: '外卖员意外觉醒高武血脉，被迫在城市地下迷宫狩猎异种。每集 90 秒，高密度反转推进主线。',
    },
    episodePrefix: {
      en: 'Abyss Siege',
      fr: 'Siege abyssal',
      es: 'Asedio del abismo',
      zh: '异种围城',
    },
    firstEpisode: {
      en: 'Sewer Entry',
      fr: 'Entree des egouts',
      es: 'Entrada al alcantarillado',
      zh: '下水道入口',
    },
  },
  'ghost-insurance': {
    title: {
      en: 'I Paid Five Social Insurances for the Uncanny',
      fr: 'J\'ai paye cinq assurances sociales pour l\'etrange',
      es: 'Pague cinco seguros sociales para lo paranormal',
      zh: '我给诡异交五险',
    },
    synopsis: {
      en: 'A social-insurance clerk slips into a bizarre world and reforms ghost society with human systems. Light comedy, perfect for quick breaks.',
      fr: 'Un agent de securite sociale entre dans un monde etrange et remet de l\'ordre chez les fantomes. Comedie legere ideale en pause.',
      es: 'Un funcionario de seguridad social cae en un mundo extrano y reorganiza a los fantasmas con reglas humanas. Comedia ligera para pausas cortas.',
      zh: '社保经办员误入诡异世界，靠人间制度整顿鬼域秩序。轻喜剧风格，适合碎片时间追更。',
    },
    episodePrefix: {
      en: 'Ghost Social Bureau',
      fr: 'Bureau social fantome',
      es: 'Oficina social fantasma',
      zh: '鬼域社保局',
    },
  },
  'last-cable': {
    title: {
      en: 'Internet Apocalypse: Saving the World with One Fiber Cable',
      fr: 'Apocalypse reseau: sauver le monde avec une fibre',
      es: 'Apocalipsis de red: salvar el mundo con una sola fibra',
      zh: '末日断网，我凭一根光缆救世',
    },
    synopsis: {
      en: 'After global networks collapse, a young engineer and tactical squad escort the last fiber line. Cyber-doomsday style with relentless pacing.',
      fr: 'Apres l\'effondrement du reseau mondial, un jeune ingenieur escorte la derniere fibre avec une escouade tactique.',
      es: 'Tras el colapso global de internet, un joven ingeniero escolta la ultima fibra junto a un escuadron tactico.',
      zh: '全球网络崩溃后，少年工程师与战术小队护送最后一段光缆。赛博末日风，节奏极快。',
    },
    episodePrefix: {
      en: 'Relay Station',
      fr: 'Station relais',
      es: 'Estacion rele',
      zh: '光缆中继站',
    },
  },
  'taizi-zombie': {
    title: {
      en: 'Zombie Siege: Max-Level Crown Prince in the Apocalypse',
      fr: 'Siege zombie: le prince heritier max niveau dans l\'apocalypse',
      es: 'Asedio zombi: el principe maximo en el apocalipsis',
      zh: '丧尸围城：满级太子降临末世',
    },
    synopsis: {
      en: 'An ancient crown prince is transported into the apocalypse and rebuilds order through strategy and force. 60-100 second episodes, now completed.',
      fr: 'Un prince ancien voyage vers la fin du monde et reconstruit l\'ordre par strategie et puissance. Serie terminee.',
      es: 'Un principe antiguo viaja al apocalipsis y reconstruye el orden con estrategia y fuerza. Serie finalizada.',
      zh: '古代太子穿越到末世，用权谋和武力建立幸存者秩序。每集 60-100 秒，连载已完结。',
    },
    episodePrefix: {
      en: 'Doomsday Throne',
      fr: 'Trone apocalyptique',
      es: 'Trono del apocalipsis',
      zh: '末世王权',
    },
  },
  'campus-rank': {
    title: {
      en: 'The School Net-Cafe Girl Is Actually a Legendary Sniper',
      fr: 'La fille du cybercafe scolaire est une sniper legendaire',
      es: 'La chica del ciber escolar es una francotiradora legendaria',
      zh: '惊掉下巴女网管竟是绝世枪神',
    },
    synopsis: {
      en: 'A part-time net-cafe worker becomes the #1 sniper at night. Campus life, e-sports and romance woven into one fast series.',
      fr: 'Une employee de cybercafe devient la meilleure tireuse la nuit. Campus, e-sport et romance au meme rythme.',
      es: 'Una encargada de ciber se convierte de noche en la mejor francotiradora. Campus, e-sports y romance en una sola trama.',
      zh: '电竞馆网管白天打工，晚上化身排行榜第一狙神。校园+电竞+恋爱三线叙事。',
    },
    episodePrefix: {
      en: 'Sniper Debut',
      fr: 'Debut de sniper',
      es: 'Debut de la francotiradora',
      zh: '狙神登场',
    },
  },
  'myth-trial': {
    title: {
      en: 'National Fate Trial: I Forged a Mythic Huaxia Pantheon',
      fr: 'Proces du destin: j\'ai forge un pantheon mythique huaxia',
      es: 'Juicio del destino: forje un panteon mitico huaxia',
      zh: '国运审判：我编造了华夏神话谱系',
    },
    synopsis: {
      en: 'In a civilizational showdown, a teenager reverses national fate by inventing a mythic system, unveiling new characters and lore each episode.',
      fr: 'Dans un duel de civilisations, un adolescent inverse le destin national en inventant un systeme mythique, episode apres episode.',
      es: 'En un duelo de civilizaciones, un joven invierte el destino nacional creando un sistema mitico, revelando nuevos personajes cada episodio.',
      zh: '文明对决中，少年用虚构神话体系逆转国运，逐集解锁人物与世界观。',
    },
    episodePrefix: {
      en: 'Mythic Codex',
      fr: 'Codex mythique',
      es: 'Codice mitico',
      zh: '神话谱系',
    },
  },
};

const detectLanguage = (): Language => {
  if (typeof window === 'undefined') return 'en';

  const saved = window.localStorage.getItem(LANGUAGE_STORAGE_KEY);
  if (saved && SUPPORTED_LANGUAGE_SET.has(saved as Language)) {
    return saved as Language;
  }

  const browserLanguage = window.navigator.language.toLowerCase();
  if (browserLanguage.startsWith('zh')) return 'zh';
  if (browserLanguage.startsWith('fr')) return 'fr';
  if (browserLanguage.startsWith('es')) return 'es';
  return 'en';
};

const interpolate = (template: string, values?: InterpolationValues): string => {
  if (!values) return template;

  return template.replace(/\{(\w+)\}/g, (_, token: string) => {
    const value = values[token];
    return value === undefined ? `{${token}}` : String(value);
  });
};

interface I18nContextValue {
  language: Language;
  setLanguage: (language: Language) => void;
  t: (key: string, values?: InterpolationValues) => string;
  translateGenre: (genre: string) => string;
  translateStatus: (status: string) => string;
  localizeSeries: (series: Series) => Series;
}

const I18nContext = createContext<I18nContextValue | null>(null);

export const I18nProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [language, setLanguageState] = useState<Language>(() => detectLanguage());

  useEffect(() => {
    if (typeof window === 'undefined') return;
    window.localStorage.setItem(LANGUAGE_STORAGE_KEY, language);
    document.documentElement.lang = language;
  }, [language]);

  const t = useCallback(
    (key: string, values?: InterpolationValues) => {
      const languageDict = TRANSLATIONS[language];
      const template = languageDict[key] || EN_TRANSLATIONS[key] || key;
      return interpolate(template, values);
    },
    [language],
  );

  const setLanguage = useCallback((nextLanguage: Language) => {
    setLanguageState(nextLanguage);
  }, []);

  const translateGenre = useCallback(
    (genre: string) => {
      const key = GENRE_KEY_MAP[genre];
      if (!key) return genre;
      return t(key);
    },
    [t],
  );

  const translateStatus = useCallback(
    (status: string) => {
      const key = STATUS_KEY_MAP[status];
      if (!key) return status;
      return t(key);
    },
    [t],
  );

  const localizeSeries = useCallback(
    (series: Series): Series => {
      const localizedDrama = DRAMA_TEXT[series.id];
      if (!localizedDrama) return series;

      return {
        ...series,
        title: localizedDrama.title[language] || series.title,
        synopsis: localizedDrama.synopsis[language] || series.synopsis,
        episodes: series.episodes.map((episode) => {
          if (episode.number === 1 && localizedDrama.firstEpisode) {
            return {
              ...episode,
              title: localizedDrama.firstEpisode[language] || episode.title,
            };
          }

          return {
            ...episode,
            title: `${localizedDrama.episodePrefix[language] || episode.title} ${episode.number}`,
          };
        }),
      };
    },
    [language],
  );

  const contextValue = useMemo<I18nContextValue>(
    () => ({
      language,
      setLanguage,
      t,
      translateGenre,
      translateStatus,
      localizeSeries,
    }),
    [language, localizeSeries, setLanguage, t, translateGenre, translateStatus],
  );

  return <I18nContext.Provider value={contextValue}>{children}</I18nContext.Provider>;
};

export const useI18n = () => {
  const context = useContext(I18nContext);
  if (!context) {
    throw new Error('useI18n must be used inside I18nProvider');
  }
  return context;
};
